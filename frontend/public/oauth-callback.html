<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>OAuth callback</title>
  </head>
  <body>
    <script>
      // Extract token from query and persist to localStorage then redirect to app root
      const params = new URLSearchParams(window.location.search);
      const token = params.get('token');
      if (token) {
        localStorage.setItem('auth_token', token);
        // small delay to ensure storage
        setTimeout(() => { window.location.href = '/'; }, 500);
      } else {
        document.body.innerText = 'OAuth callback: missing token';
      }
    </script>
  </body>
</html>
